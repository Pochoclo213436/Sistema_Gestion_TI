services:

  # ==========================
  # API GATEWAY
  # ==========================
  - type: web
    name: api-gateway
    env: docker
    plan: free
    region: oregon
    dockerfilePath: ./services/api_gateway/Dockerfile
    envVars:
      - key: DATABASE_URL
        value: postgresql://ti_management_db_user:AFIrFKuaLJc9ZnJVsaaf74KruZmiDN0z@dpg-d4npgis9c44c73d2tig0-a.oregon-postgres.render.com/ti_management_db
      - key: SECRET_KEY
        sync: false
      - key: ENVIRONMENT
        value: production
      - key: DEBUG
        value: "false"
      - key: EQUIPOS_SERVICE_URL
        value: https://equipos-service.onrender.com
      - key: PROVEEDORES_SERVICE_URL
        value: https://proveedores-service.onrender.com
      - key: MANTENIMIENTO_SERVICE_URL
        value: https://mantenimiento-service.onrender.com
      - key: REPORTES_SERVICE_URL
        value: https://reportes-service.onrender.com
      - key: AGENT_SERVICE_URL
        value: https://agent-service.onrender.com

  # ==========================
  # EQUIPOS SERVICE
  # ==========================
  - type: web
    name: equipos-service
    env: docker
    plan: free
    dockerfilePath: ./services/equipos_service/Dockerfile
    envVars:
      - key: DATABASE_URL
        value: postgresql://ti_management_db_user:AFIrFKuaLJc9ZnJVsaaf74KruZmiDN0z@dpg-d4npgis9c44c73d2tig0-a.oregon-postgres.render.com/ti_management_db
      - key: ENVIRONMENT
        value: production
      - key: DEBUG
        value: "false"

  # ==========================
  # PROVEEDORES SERVICE
  # ==========================
  - type: web
    name: proveedores-service
    env: docker
    plan: free
    dockerfilePath: ./services/proveedores_service/Dockerfile
    envVars:
      - key: DATABASE_URL
        value: postgresql://ti_management_db_user:AFIrFKuaLJc9ZnJVsaaf74KruZmiDN0z@dpg-d4npgis9c44c73d2tig0-a.oregon-postgres.render.com/ti_management_db
      - key: ENVIRONMENT
        value: production
      - key: DEBUG
        value: "false"

  # ==========================
  # MANTENIMIENTO SERVICE
  # ==========================
  - type: web
    name: mantenimiento-service
    env: docker
    plan: free
    dockerfilePath: ./services/mantenimiento_service/Dockerfile
    envVars:
      - key: DATABASE_URL
        value: postgresql://ti_management_db_user:AFIrFKuaLJc9ZnJVsaaf74KruZmiDN0z@dpg-d4npgis9c44c73d2tig0-a.oregon-postgres.render.com/ti_management_db
      - key: ENVIRONMENT
        value: production
      - key: DEBUG
        value: "false"

  # ==========================
  # REPORTES SERVICE
  # ==========================
  - type: web
    name: reportes-service
    env: docker
    plan: free
    dockerfilePath: ./services/reportes_service/Dockerfile
    envVars:
      - key: DATABASE_URL
        value: postgresql://ti_management_db_user:AFIrFKuaLJc9ZnJVsaaf74KruZmiDN0z@dpg-d4npgis9c44c73d2tig0-a.oregon-postgres.render.com/ti_management_db
      - key: REPORTS_PATH
        value: /data
      - key: ENVIRONMENT
        value: production
      - key: DEBUG
        value: "false"

  # ==========================
  # AGENT SERVICE
  # ==========================
  - type: web
    name: agent-service
    env: docker
    plan: free
    dockerfilePath: ./services/agent_service/Dockerfile
    envVars:
      - key: DATABASE_URL
        value: postgresql://ti_management_db_user:AFIrFKuaLJc9ZnJVsaaf74KruZmiDN0z@dpg-d4npgis9c44c73d2tig0-a.oregon-postgres.render.com/ti_management_db
      - key: AGENT_RUN_INTERVAL_HOURS
        value: "24"
      - key: AGENT_MAINTENANCE_CHECK_DAYS
        value: "7"
      - key: ENVIRONMENT
        value: production
      - key: DEBUG
        value: "false"

  # ==========================
  # FRONTEND
  # ==========================
  - type: web
    name: ti-frontend
    env: docker
    plan: free
    dockerfilePath: ./frontend/Dockerfile
    envVars:
      - key: PUBLIC_GATEWAY_URL
        value: https://api-gateway.onrender.com
